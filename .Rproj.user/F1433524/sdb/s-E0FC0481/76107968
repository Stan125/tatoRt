{
    "collab_server" : "",
    "contents" : "### --- Get the data --- ####\n\n# Delete everything\nrm(list = ls())\n\n# Libraries\nlibrary(XML)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(rvest)\nlibrary(lubridate)\n\n### IMDB Table ###\n\n# Get link for imdb ratings page\npage <- \"http://www.imdb.com/title/tt0806910epdate?ref_=ttep_ql_4\"\n\n# Obtain table\nimdb_table <- readHTMLTable(page, header = TRUE)\nseries_table <- imdb_table[[1]][, 1:4]\n\n# Modify table\ncolnames(series_table) <- c(\"number\", \"ep_name\", \"rating\", \"numvotes\")\nseries_table <- series_table %>%\n  mutate(number = gsub(\"Ã‚\", \"\", number)) %>%\n  mutate(rating = as.numeric(as.character(rating)),\n         numvotes = as.numeric(as.character(gsub(\",\", \"\", numvotes))),\n         number = as.numeric(number),\n         ep_name = iconv(ep_name, from = \"UTF-8\", to = \"latin1\")) %>%\n  select(-number) %>%\n  na.omit()\n\n### Wikipedia Table ###\n\n# Link\nwiki <- \"https://de.wikipedia.org/wiki/Liste_der_Tatort-Folgen\"\n\n# Get Nodes\nwiki_nodes <- wiki %>%\n  read_html() %>%\n  html_nodes(\"table\")\n\n# Get table from second node\nwiki_table <- html_table(wiki_nodes[2]) %>%\n  as.data.frame()\n\n# Set German locale to convert dates, works only on macOS\nSys.setlocale(\"LC_TIME\", \"de_DE\")\nwiki_table <- wiki_table %>%\n  mutate(Erstausstrahlung = gsub(\"[.]\", \"\", Erstausstrahlung)) %>%\n  mutate(Erstausstrahlung = as.Date(Erstausstrahlung, \"%d %b %Y\")) %>%\n  rename(ep_name = Titel)\n\n# Join ratings and wiki table\nwiki_table <- left_join(wiki_table, series_table)\n\n# Omit collaboration Tatorts\nwiki_table <- wiki_table %>%\n  filter(!grepl(\"/\", Sender))\n\n# Make countries\nwiki_table$Land <- ifelse(wiki_table$Sender == \"ORF\", \"Oesterreich\", \n                          ifelse(wiki_table$Sender == \"SRF\", \"Schweiz\",\n                                 \"Deutschland\"))\n\n# Save data\nsave(list = \"wiki_table\", file = \"01_data generator/wiki_table.RData\")\n",
    "created" : 1474120297467.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1368566656",
    "id" : "76107968",
    "lastKnownWriteTime" : 1474120626,
    "last_content_update" : 1474120626701,
    "path" : "~/GitHub/tatoRt/01_data generator/data_generator.R",
    "project_path" : "01_data generator/data_generator.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}